<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>5.5. Hashing &#8212; Resolução de Problemas Usando Python</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.0.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/presenter_mode.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/matrixeq.css?v=58BC228F" />
    <link rel="stylesheet" type="text/css" href="../_static/clickable.css?v=58C4E18A" />
    <link rel="stylesheet" type="text/css" href="../_static/tabbedstuff.css?v=424F1CC9" />
    <link rel="stylesheet" type="text/css" href="../_static/fitb.css?v=3BA0E63E" />
    <link rel="stylesheet" type="text/css" href="../_static/video.css?v=E5385B3B" />
    <link rel="stylesheet" type="text/css" href="../_static/webgldemo.css?v=B36B48D" />
    <link rel="stylesheet" type="text/css" href="../_static/webglinteractive.css?v=910DF1E1" />
    <link rel="stylesheet" type="text/css" href="../_static/codemirror.css?v=1CE53237" />
    <link rel="stylesheet" type="text/css" href="../_static/reveal.css?v=4A81D381" />
    <link rel="stylesheet" type="text/css" href="../_static/parsons.css?v=2F3E13EE" />
    <link rel="stylesheet" type="text/css" href="../_static/js_lib/prettify.css?v=2A364B6B" />
    <link rel="stylesheet" type="text/css" href="../_static/pytutor.css?v=239FC54E" />
    <link rel="stylesheet" type="text/css" href="../_static/modal-basic.css?v=8A1A42E4" />
    <link rel="stylesheet" type="text/css" href="../_static/activecode.css?v=F471F95B" />
    <link rel="stylesheet" type="text/css" href="../_static/datafile.css?v=C184EB8A" />
    <link rel="stylesheet" type="text/css" href="../_static/showEval.css?v=C6382F3" />
    <link rel="stylesheet" type="text/css" href="../_static/accessibility.css?v=808B982A" />
    <link rel="stylesheet" type="text/css" href="../_static/dragndrop.css?v=B9BAA0D1" />
    <link rel="stylesheet" type="text/css" href="../_static/poll.css?v=E220AC33" />
    <link rel="stylesheet" href="../_static/jquery-ui-1.10.3.custom.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/user-highlights.css" type="text/css" />
    <link rel="stylesheet" href="../_static/runestone-custom-sphinx-bootstrap.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/runestonebase.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/matrixeq.js?v=D64CFA5A"></script>
    <script type="text/javascript" src="../_static/clickable.js?v=9560E65E"></script>
    <script type="text/javascript" src="../_static/timedclickable.js?v=93989C23"></script>
    <script type="text/javascript" src="../_static/tabbedstuff.js?v=5BE6106"></script>
    <script type="text/javascript" src="../_static/fitb.js?v=8E40E713"></script>
    <script type="text/javascript" src="../_static/timedfitb.js?v=2AA17071"></script>
    <script type="text/javascript" src="../_static/runestonevideo.js?v=53E888DE"></script>
    <script type="text/javascript" src="../_static/codemirror.js?v=94F552C9"></script>
    <script type="text/javascript" src="../_static/xml.js?v=236EDFF7"></script>
    <script type="text/javascript" src="../_static/css.js?v=623153CE"></script>
    <script type="text/javascript" src="../_static/htmlmixed.js?v=33B91944"></script>
    <script type="text/javascript" src="../_static/javascript.js?v=6F38CA04"></script>
    <script type="text/javascript" src="../_static/webglinteractive.js?v=2B768384"></script>
    <script type="text/javascript" src="../_static/FileSaver.min.js?v=8408C997"></script>
    <script type="text/javascript" src="../_static/Blob.js?v=AEC2447"></script>
    <script type="text/javascript" src="../_static/reveal.js?v=112CBFA2"></script>
    <script type="text/javascript" src="../_static/js_lib/prettify.js?v=CA7E8928"></script>
    <script type="text/javascript" src="../_static/js_lib/hammer.min.js?v=73056367"></script>
    <script type="text/javascript" src="../_static/parsons.js?v=93EFFF39"></script>
    <script type="text/javascript" src="../_static/timedparsons.js?v=2EEA9E5A"></script>
    <script type="text/javascript" src="../_static/animationbase.js?v=A043C3A7"></script>
    <script type="text/javascript" src="../_static/mchoice.js?v=8329CA55"></script>
    <script type="text/javascript" src="../_static/timedmc.js?v=B010A457"></script>
    <script type="text/javascript" src="../_static/timed.js?v=6789FE30"></script>
    <script type="text/javascript" src="../_static/shortanswer.js?v=5EB6170D"></script>
    <script type="text/javascript" src="../_static/timed_shortanswer.js?v=B3A117D7"></script>
    <script type="text/javascript" src="../_static/d3.v2.min.js?v=836E01C"></script>
    <script type="text/javascript" src="../_static/jquery.ba-bbq.min.js?v=B64CF0A8"></script>
    <script type="text/javascript" src="../_static/jquery.jsPlumb-1.3.10-all-min.js?v=42F9EBEA"></script>
    <script type="text/javascript" src="../_static/pytutor.js?v=82B022B9"></script>
    <script type="text/javascript" src="../_static/codelens.js?v=CABECD49"></script>
    <script type="text/javascript" src="../_static/jquery.highlight.js?v=F1C496C8"></script>
    <script type="text/javascript" src="../_static/bookfuncs.js?v=21EFC8E1"></script>
    <script type="text/javascript" src="../_static/python.js?v=14A28F1F"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/CLDRPluralRuleParser.js?v=599B42B0"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.js?v=88A1430F"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.messagestore.js?v=AE15A4A1"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.fallbacks.js?v=8ABDFE7F"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.language.js?v=747279FF"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.parser.js?v=7B020E13"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.emitter.js?v=660E85C3"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.emitter.bidi.js?v=54B21948"></script>
    <script type="text/javascript" src="../_static/activecode-i18n.en.js?v=3FBAE230"></script>
    <script type="text/javascript" src="../_static/skulpt.min.js?v=DC7AC815"></script>
    <script type="text/javascript" src="../_static/skulpt-stdlib.js?v=48A5D93E"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega@4.0.0-rc.2/build/vega.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-lite@2.5.0/build/vega-lite.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-embed@3.14.0/build/vega-embed.js"></script>
    <script type="text/javascript" src="../_static/activecode.js?v=9FA573E1"></script>
    <script type="text/javascript" src="../_static/clike.js?v=2DCE0756"></script>
    <script type="text/javascript" src="../_static/timed_activecode.js?v=5150FA78"></script>
    <script type="text/javascript" src="../_static/datafile.js?v=3ED1A80C"></script>
    <script type="text/javascript" src="../_static/showEval.js?v=C5CE0C81"></script>
    <script type="text/javascript" src="../_static/dragndrop.js?v=2B6403E8"></script>
    <script type="text/javascript" src="../_static/timeddnd.js?v=378F237E"></script>
    <script type="text/javascript" src="../_static/poll.js?v=6C59AE9F"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/jquery-ui-1.10.3.custom.min.js"></script>
    <script type="text/javascript" src="../_static/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.0.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <script type="text/javascript" src="../_static/waypoints.min.js"></script>
    <script type="text/javascript" src="../_static/user-highlights.js"></script>
    <script type="text/javascript" src="../_static/jquery.idle-timer.js"></script>
    <script type="text/javascript" src="../_static/processing-1.4.1.min.js"></script>
    <script type="text/javascript" src="../_static/jquery.hotkey.js"></script>
    <script type="text/javascript" src="../_static/jquery-migrate-1.2.1.min.js"></script>
    <script type="text/javascript" src="../_static/presenter_mode.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5.6. Ordenação" href="ordenacao.html" />
    <link rel="prev" title="5.4. A Busca Binária" href="BuscaBinaria.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta content='width=device-width, initial-scale=1.0' name='viewport' />
<link rel="shortcut icon" href="/runestone/static/favicon.ico" type="image/ico" />

<script type="text/javascript">
  eBookConfig = {};
  eBookConfig.host = 'http://127.0.0.1:8000' ? 'http://127.0.0.1:8000' : 'http://127.0.0.1:8000';
  eBookConfig.app = eBookConfig.host+'/runestone';
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.course = 'LivroAlgoritmos';
  eBookConfig.logLevel = 0;
  eBookConfig.loginRequired = false;
  eBookConfig.build_info = "3.5.0";
  eBookConfig.isLoggedIn = false;
  eBookConfig.useRunestoneServices = false;
  eBookConfig.python3 = true;
  eBookConfig.basecourse = 'LivroAlgoritmos';
  eBookConfig.acDefaultLanguage = 'python' ? 'python' : 'python'
  eBookConfig.runestone_version = '3.4.5';
  eBookConfig.jobehost = 'http://jobe2.cosc.canterbury.ac.nz';
  eBookConfig.proxyuri_runs = '/jobe/index.php/restapi/runs/';
  eBookConfig.proxyuri_files = '/jobe/index.php/restapi/files/';
  eBookConfig.downloadsEnabled = false;
  eBookConfig.enable_chatcodes = false ? false : false;
  eBookConfig.allow_pairs = false ? false : false;
</script>

<div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&status=0";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>


  </head><body>


<!-- Begin navbar -->
<div id="navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">

  <div class="container">

    <div class="navbar-header">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type='button' class='navbar-toggle' data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div>
        <a class="brand-logo" style='background: transparent url("../_static/img/logo_small.png") no-repeat 0px 0px;' href="/runestone/default/user/login">&nbsp; </a>
        <a class="navbar-brand" href="../index.html" aria-label="index-page">Resolução de Problemas Usando Python</a>
      </div>
    </div>



    <div class="navbar-collapse collapse navbar-ex1-collapse">
      <ul class="nav navbar-nav navbar-right" >

        <li class="divider-vertical"></li>

        <!-- social media dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-globe" style="opacity: 0.9"></i>
          </a>
          <ul class="dropdown-menu social-menu">
              <li>
                <div>
                  <b>Runestone in social media:</b>
                </div>
                <a href="https://twitter.com/iRunestone" class="twitter-follow-button" data-show-count="true">Follow @iRunestone</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                <div class="fb-like" data-href="https://www.facebook.com/RunestoneInteractive" data-send="false" data-layout="button_count" data-width="300" data-show-faces="false" data-font="arial"></div>
              </li>

              <li class="divider"></li>
              <li>
                <div>
                  <b>Help support us:</b>
                </div>
                <div>
                    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
                  <input type="hidden" name="cmd" value="_s-xclick">
                  <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----MIIHNwYJKoZIhvcNAQcEoIIHKDCCByQCAQExggEwMIIBLAIBADCBlDCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20CAQAwDQYJKoZIhvcNAQEBBQAEgYAcrkqh1hn3lYqIpfXxNqe1T82EhXzCJGy1yMAmklpyZshyMkfDGe1Bhx+iwyGeoYRTTyphFmP+9M3NyO0+Q5XdHxgZPx/zYjjBxlZHgEV6jhE8bN2fHkkPf0VHfz0a0QQylQOPlKiOTZV7B37Jpk6yM47oVZ1tG/KNm0NkfmB76DELMAkGBSsOAwIaBQAwgbQGCSqGSIb3DQEHATAUBggqhkiG9w0DBwQIi0GmFfOlcjuAgZBbYOo9UO+CpMQa+PYqwsUmUnJvXIImeMeNI3KVTUx5Cfk9gNMo3WzPeiB5IqZo9nRAQ0mf1qL2ecLeB5tidM+lgBUhOxfj3/FecpnVFa0263gp4g+PLw8jzhvVRdUon1K3SeO1Rzh23fIRKwnrD6btt73uwtj0sl3tGd8qz+6GIcwPDdRk9VcUffiBJT/ZagKgggOHMIIDgzCCAuygAwIBAgIBADANBgkqhkiG9w0BAQUFADCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20wHhcNMDQwMjEzMTAxMzE1WhcNMzUwMjEzMTAxMzE1WjCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20wgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAMFHTt38RMxLXJyO2SmS+Ndl72T7oKJ4u4uw+6awntALWh03PewmIJuzbALScsTS4sZoS1fKciBGoh11gIfHzylvkdNe/hJl66/RGqrj5rFb08sAABNTzDTiqqNpJeBsYs/c2aiGozptX2RlnBktH+SUNpAajW724Nv2Wvhif6sFAgMBAAGjge4wgeswHQYDVR0OBBYEFJaffLvGbxe9WT9S1wob7BDWZJRrMIG7BgNVHSMEgbMwgbCAFJaffLvGbxe9WT9S1wob7BDWZJRroYGUpIGRMIGOMQswCQYDVQQGEwJVUzELMAkGA1UECBMCQ0ExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC1BheVBhbCBJbmMuMRMwEQYDVQQLFApsaXZlX2NlcnRzMREwDwYDVQQDFAhsaXZlX2FwaTEcMBoGCSqGSIb3DQEJARYNcmVAcGF5cGFsLmNvbYIBADAMBgNVHRMEBTADAQH/MA0GCSqGSIb3DQEBBQUAA4GBAIFfOlaagFrl71+jq6OKidbWFSE+Q4FqROvdgIONth+8kSK//Y/4ihuE4Ymvzn5ceE3S/iBSQQMjyvb+s2TWbQYDwcp129OPIbD9epdr4tJOUNiSojw7BHwYRiPh58S1xGlFgHFXwrEBb3dgNbMUa+u4qectsMAXpVHnD9wIyfmHMYIBmjCCAZYCAQEwgZQwgY4xCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJDQTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLUGF5UGFsIEluYy4xEzARBgNVBAsUCmxpdmVfY2VydHMxETAPBgNVBAMUCGxpdmVfYXBpMRwwGgYJKoZIhvcNAQkBFg1yZUBwYXlwYWwuY29tAgEAMAkGBSsOAwIaBQCgXTAYBgkqhkiG9w0BCQMxCwYJKoZIhvcNAQcBMBwGCSqGSIb3DQEJBTEPFw0xMzExMDMxMzQxMzFaMCMGCSqGSIb3DQEJBDEWBBRDJF8w+zsMr7FSk+pwinB5f5D4rzANBgkqhkiG9w0BAQEFAASBgHw1LMHpkpaqHIvDGdFE0eG+2mZlmMnUeDCBhQlbc7QMzFQYKTV94NfaebBO4PmNdADe1rq4WidSRZZbE7CzkX9IGENYnBTWY0hb2l0lGdGrJdGeWyV3ekg9WVaFMMumrekds96h3Cx7dGz2kWDzIai2iEXE/qoE+xpkyXAYZNV3-----END PKCS7-----
                  ">
                  <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
                  <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
                  </form>

                </div>
              </li>
          </ul>
        </li>
        <!-- end social media dropdown -->

        <li class="divider-vertical"></li>

        <!-- search dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-search" style='opacity:0.9;'></i>
          </a>
          <ul class='dropdown-menu'>
            
                <li><a href='../index.html' aria-label="index-page">Table of Contents</a></li>
            
            <li><a href='/runestone/static/LivroAlgoritmos/genindex.html'>Book Index</a></li>
            <li class="divider"></li>
            <li style="width: 240px;">
              <form class="navbar-search" style="margin:10px;" action="../search.html" method="get">
                <div class="input-group">
                  <input type="text" class="form-control" name="q" placeholder="Search this book" />
                  <span class="input-group-btn">
                    <button class="btn btn-primary" style="margin:0;" type="submit">
                      <i class="glyphicon glyphicon-search"></i>
                    </button>
                  </span>
                </div><!-- /input-group -->
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
            </li>
          </ul>
        </li>
        <!-- end search dropdown -->

        <li class="divider-vertical"></li>

        
        <li class="divider-vertical"></li>
        <!-- <li id="scratch_ac_link"><a href="javascript:ACFactory.toggleScratchActivecode()">Scratch ActiveCode</a></li> -->

        <!-- <li class="dropdown">             -->
          <li id="scratch_ac_link" class="dropdown"><a href="javascript:ACFactory.toggleScratchActivecode()">
              <i class="glyphicon glyphicon-pencil" style="opacity:0.9;"></i></a></li>
        <!-- </li> -->

        <li class="divider-vertical"></li>

        <!-- help menu dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-question-sign" style="opacity:0.9;"></i>
          </a>
          <ul class="dropdown-menu user-menu">
            <li><a href='/runestone/static/LivroAlgoritmos/navhelp.html'>Navigation Help</a></li>
            <li><a href='/runestone/static/overview/instructor.html'>Help for Instructors</a></li>
            <li class="divider"></li>
            <li><a href='http://runestoneinteractive.org'>About Runestone</a></li>
            <li><a href='/runestone/default/reportabug?course=LivroAlgoritmos&page=Hashing'>Report A Problem</a></li>
          </ul>
        </li>
        <!-- end help menu dropdown -->

        <li class="divider-vertical"></li>

      </ul>
      </div>






      <ul class="nav navbar-nav">
        <li class="divider-vertical"></li>
        <!--
          <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"><ul>
<li><a class="reference internal" href="#">5.5. Hashing</a><ul>
<li><a class="reference internal" href="#funcoes-de-espalhamento">5.5.1. Funções de Espalhamento</a></li>
<li><a class="reference internal" href="#resolucao-de-colisoes">5.5.2. Resolução de Colisões</a></li>
<li><a class="reference internal" href="#implementando-o-tipo-de-dado-abstrato-mapa">5.5.3. Implementando o Tipo de Dado Abstrato <code class="docutils literal notranslate"><span class="pre">Mapa</span></code></a></li>
<li><a class="reference internal" href="#analise-do-hashing">5.5.4. Análise do Hashing</a></li>
</ul>
</li>
</ul>
</ul>
</li>
          <li class="divider-vertical"></li>
        
        
          
  <li id="relations-prev" title="Previous Chapter - 5.4. A Busca Binária" data-toggle="tooltip">
    <a href="BuscaBinaria.html" >
      <i class='glyphicon glyphicon-backward' style='opacity:0.9;'></i>
    </a>
  </li>
  
  <li id="relations-next" title='Next Chapter - 5.6. Ordenação' data-toggle="tooltip" >              
    <a href="ordenacao.html" >
        <i class='glyphicon glyphicon-forward' style='opacity:0.9;'></i>
    </a>
  </li>
  <li class="divider-vertical"></li>

<script type="text/javascript">
  opts = {'placement':'bottom',
          'selector': '',
          'delay': { show: 100, hide: 50}
         };

  $('#relations-prev').tooltip(opts);
  $('#relations-next').tooltip(opts);
</script>
        -->
        
          <li></li>
        
      </ul>

    </div>
  </div>
</div>


<div class="container" id="continue-reading"></div>

<div class="container" id="main-content">
  
  <div class="section" id="hashing">
<h1>5.5. Hashing<a class="headerlink" href="#hashing" title="Permalink to this headline">¶</a></h1>
<p>Nas seções anteriores conseguimos uma melhora nos nossos algoritmos
de busca por meio da informação de como cada item de uma coleção
é armazenado em relação ao outro. Por exemplo, sabendo que uma lista
estava ordenada, nós pudemos realizar uma busca em tempo logarítmico
fazendo uma busca binária. Nesta seção tentaremos dar um passo além,
construindo uma estrutura de dados cuja busca tem tempo <span class="math notranslate nohighlight">\(O(1)\)</span>.
Esse conceito é conhecido como <strong>hashing</strong>.</p>
<p>Para fazer isso, precisaremos saber mais sobre onde os itens poderão
estar quando procurarmos por eles na coleção. Se cada item está onde
deveria, então a busca pode ser feita usando uma única comparação para
descobrir sua presença. Iremos perceber, contudo, que isso não é o que
acontece na prática.</p>
<p>Uma <strong>tabela de dispersão</strong> (ou hash table) é uma coleção de itens que são
armazenados de maneira a serem encontrados com facilidade mais tarde. Cada
posição da tabela de dispersão, geralmente denominada <strong>índice</strong> (ou slot), pode
guardar um item e possui um rótulo inteiro começando a partir de 0. Por exemplo,
teremos um índice com rótulo 0, um índice com rótulo 1, outro com rótulo 2 e assim
por diante. Inicialmente, a tabela de dispersão não contém nenhum item, então
todos os índices estão vazios. Nós podemos implementar uma tabela de dispersão
usando uma lista com cada elemento inicializado pelo valor especial
<code class="docutils literal notranslate"><span class="pre">None</span></code> do Python. A <a class="reference internal" href="#fig-hashtable1"><span class="std std-ref">Figura 4</span></a> mostra uma tabela de
dispersão de tamanho <span class="math notranslate nohighlight">\(m=11\)</span>. Em outras palavras, existem <em>m</em> índices na
tabela, rotulados de 0 a 10.</p>
<div class="figure align-center" id="id1">
<span id="fig-hashtable1"></span><img alt="../_images/hashtable.png" src="../_images/hashtable.png" />
<p class="caption"><span class="caption-text">Figura 4: Tabela de Dispersão com 11 Índices Vazios</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>O mapeamento entre a chave e o índice ao qual ela pertence na tabela é
conhecido como a <strong>função de espalhamento</strong> (ou hash function). A função de
espalhamento irá receber qualquer item na coleção e irá retornar um inteiro
dentro do intervalo dos índices, isto é, entre 0 e <em>m</em>-1. Suponha, por exemplo,
o conjunto de inteiros formado por 54, 26, 93, 17, 77 e 31. Nossa primeira
função de hash, às vezes chamada de “método do resto”, simplesmente pega um item
e o divide pelo tamanho da tabela, retornando o resto da divisão e o seu valor
de espalhamento (<span class="math notranslate nohighlight">\(h(item)=item \% 11\)</span>). A <a class="reference internal" href="#tbl-hashvalues1"><span class="std std-ref">Tabela 4</span></a>
mostra todos os valores de espalhamento para os itens do nosso conjunto. Observe
que o método do resto (artimética modular) tipicamente estará presente de algum
modo em todas as funções de espalhamento, já que o resultado deve estar dentro do
intervalo dos índices.</p>
<span id="tbl-hashvalues1"></span><table class="docutils align-default" id="id2">
<caption><span class="caption-text"><strong>Tabela 4: Função Simples de Espalhamento Usando o Resto da Divisão</strong></span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 39%" />
<col style="width: 61%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Item</strong></p></th>
<th class="head"><p><strong>Valor de Espalhamento</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>54</p></td>
<td><p>10</p></td>
</tr>
<tr class="row-odd"><td><p>26</p></td>
<td><p>4</p></td>
</tr>
<tr class="row-even"><td><p>93</p></td>
<td><p>5</p></td>
</tr>
<tr class="row-odd"><td><p>17</p></td>
<td><p>6</p></td>
</tr>
<tr class="row-even"><td><p>77</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>31</p></td>
<td><p>9</p></td>
</tr>
</tbody>
</table>
<p>Uma vez que os valores de espalhamento tenham sido computados, podemos inserir
cada item na tabela de dispersão na posição designada, como mostrado na
<a class="reference internal" href="#fig-hashtable2"><span class="std std-ref">Figura 5</span></a>. Note que 6 dos 11 índices estão agora ocupados.
Essa razão é conhecida como <strong>fator de carga</strong> e é comumente denotada por
<span class="math notranslate nohighlight">\(\lambda = \frac {numerodeitens}{tamanhodatabela}\)</span>. Para o nosso exemplo,
o fator de carga é <span class="math notranslate nohighlight">\(\lambda = \frac {6}{11}\)</span>.</p>
<div class="figure align-center" id="id3">
<span id="fig-hashtable2"></span><img alt="../_images/hashtable2.png" src="../_images/hashtable2.png" />
<p class="caption"><span class="caption-text">Figura 5: Tabela de Dispersão com Seis Itens</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<p>Agora, quando queremos procurar um item, simplesmente utilizamos a função de
espalhamento para calcular o índice correspondente da chave e acessamos a
tabela de dispersão para verificar se ela está presente. Essa operação de
busca é <span class="math notranslate nohighlight">\(O(1)\)</span>, já que é necessário apenas um tempo constante para
computar o valor de espalhamento e acessar a posição apontada pelo índice
correspondente na tabela. Se tudo estiver onde deveria, encontramos um
algoritmo de busca de tempo constante.</p>
<p>Você provavelmente já deve ter notado que essa técnica só irá funcionar se cada
item for mapeado uma localização única na tabela de dispersão. Por exemplo,
se o item 44 fosse a próxima chave na nossa coleção, ele teria um valor de
espalhamento de 0 (<span class="math notranslate nohighlight">\(44 \% 11 == 0\)</span>). Como 77 também possui 0 como valor
de espalhamento, teríamos um problema. Segundo a função de espalhamento,
dois ou mais itens deveriam estar no mesmo índice. Isso é chamado de <strong>colisão</strong>.
Claramente, colisões são um problema nesta técnica e iremos discuti-las mais
tarde.</p>
<div class="section" id="funcoes-de-espalhamento">
<h2>5.5.1. Funções de Espalhamento<a class="headerlink" href="#funcoes-de-espalhamento" title="Permalink to this headline">¶</a></h2>
<p>Dada uma coleção de itens, uma função de espalhamento capaz de mapear cada item
para um único índice é chamada de <strong>função de espalhamento perfeita</strong>. Se
soubermos que os itens e a coleção nunca irá mudar, então é possível construir
uma função de espalhamento perfeita (confira os exercícios para saber mais
sobre funções de espalhamento perfeitas). Infelizmente, dada uma coleção
arbitrária de itens, não existe uma maneira sistemática de contruir uma função
de espalhamento perfeita. Felizmente, não precisamos que a função de
espalhamento seja pefeita para ainda termos ganhos de desempenho.</p>
<p>Uma forma de sempre termos uma função de espalhamento perfeita é aumentar o
tamanho da tabela de dispersão, de modo que cada valor possível no intervalo
de itens possa ser acomodado. Isso garante que cada item terá um único índice.
Embora isso seja algo prático para um número pequeno de itens, tal estratégia
é inviável quando o número de itens é muito grande. Por exemplo, se os itens
fossem os números de nove dígitos do INSS, esse método iria requerer quase
um bilhão de índices. Se quiséssemos apenas armazenar os dados de uma sala de
aula com 25 estudantes, estaríamos desperdiçando uma quantidade enorme
de memória.</p>
<p>Nosso objetivo é criar uma função de espalhamento que minimize o número de
colisões, seja fácil de computar e distribua os itens uniformemente na
tabela de dispersão. Há algumas maneiras conhecidas de estender o método do
resto da divisão. Iremos considerar algumas delas agora.</p>
<p>O <strong>método de folding</strong> para construir funções de espalhamento começa
dividindo o item em pedaços de tamanhos iguais (o último pedaço pode não ser
de tamanho igual). Esses pedaços são somados para então gerar o valor de
espalhamento resultante. Por exemplo, se o nosso item fosse o número de
telefone 436-555-4601, iríamos extrair os dígitos e dividi-los em grupos de 2
(43, 65, 55, 46, 01). Depois de somar tudo, <span class="math notranslate nohighlight">\(43+65+55+46+01\)</span>, teríamos
210. Se a nossa tabela de dispersão tiver 11 índices, então precisaríamos
realizar o passo adicional de dividir o resultado por 11 e pegar o resto
da divisão. Nesse caso, <span class="math notranslate nohighlight">\(210\ \%\ 11\)</span> é 1, então o número de telefone
436-555-4601 seria mapeado para o índice 1. Alguns métodos de folding vão
além e trocam a ordem dos pedaços antes de somá-los. Para o exemplo acima,
teríamos algo como <span class="math notranslate nohighlight">\(43+56+55+64+01 = 219\)</span>, o que resulta em
<span class="math notranslate nohighlight">\(219\ \%\ 11 = 10\)</span>.</p>
<p>Outra técnica numérica para construir a função de espalhamento é conhecida como
<strong>método do quadrado do meio</strong>. Nela, elevamos primeiro o item ao quadrado e
depois extraímos uma parte dos dígitos resultantes. Por exemplo, se o item
fosse 44, primeiro calculamos <span class="math notranslate nohighlight">\(44 ^{2} = 1.936\)</span>. Extraindo os dois
dígitos do meio, 93, e realizando o passo de pegar o resto da divisão, ficamos
com 5 (<span class="math notranslate nohighlight">\(93\ \%\ 11\)</span>). A <a class="reference internal" href="#tbl-hashvalues2"><span class="std std-ref">Tabela 5</span></a> mostra valores
de espalhamento calculados tanto para o método do resto da divisão quanto para
o do quadrado do meio. Verifique se você entendeu como esses valores foram
calculados.</p>
<span id="tbl-hashvalues2"></span><table class="docutils align-default" id="id4">
<caption><span class="caption-text"><strong>Tabela 5: Comparação dos Métodos de Resto e do Quadrado do Meio</strong></span><a class="headerlink" href="#id4" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 31%" />
<col style="width: 28%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Item</strong></p></th>
<th class="head"><p><strong>Resto</strong></p></th>
<th class="head"><p><strong>Quadrado do Meio</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>54</p></td>
<td><p>10</p></td>
<td><p>3</p></td>
</tr>
<tr class="row-odd"><td><p>26</p></td>
<td><p>4</p></td>
<td><p>7</p></td>
</tr>
<tr class="row-even"><td><p>93</p></td>
<td><p>5</p></td>
<td><p>9</p></td>
</tr>
<tr class="row-odd"><td><p>17</p></td>
<td><p>6</p></td>
<td><p>8</p></td>
</tr>
<tr class="row-even"><td><p>77</p></td>
<td><p>0</p></td>
<td><p>4</p></td>
</tr>
<tr class="row-odd"><td><p>31</p></td>
<td><p>9</p></td>
<td><p>6</p></td>
</tr>
</tbody>
</table>
<p>Nós podemos criar também funções de espalhamento para itens baseados em
caracteres, como strings. A palavra “gato” pode ser entendida como uma sequência
de valores ordinais.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">ord</span><span class="p">(</span><span class="s1">&#39;g&#39;</span><span class="p">)</span>
<span class="go">103</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">ord</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="go">97</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">ord</span><span class="p">(</span><span class="s1">&#39;t&#39;</span><span class="p">)</span>
<span class="go">116</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">ord</span><span class="p">(</span><span class="s1">&#39;o&#39;</span><span class="p">)</span>
<span class="go">111</span>
</pre></div>
</div>
<p>Podemos pegar esses quatro valores, somá-los e usar o método do resto da divisão
para extrair um valor de espalhamento (veja a <a class="reference internal" href="#fig-stringhash"><span class="std std-ref">Figura 6</span></a>).
O <a class="reference internal" href="#lst-hashfunction1"><span class="std std-ref">Código 1</span></a> mostra uma função chamada <code class="docutils literal notranslate"><span class="pre">hash</span></code> que
recebe uma string e o tamanho de uma tabela e retorna o valor de espalhamento
dentro do intervalo de 0 a <code class="docutils literal notranslate"><span class="pre">tablesize</span></code>-1.</p>
<div class="figure align-center" id="id5">
<span id="fig-stringhash"></span><img alt="../_images/stringhash.png" src="../_images/stringhash.png" />
<p class="caption"><span class="caption-text">Figura 6: Hashing de uma String Usando Valores Ordinais</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
<p id="lst-hashfunction1"><strong>Código 1</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">hash</span><span class="p">(</span><span class="n">astring</span><span class="p">,</span> <span class="n">tablesize</span><span class="p">):</span>
    <span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">pos</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">astring</span><span class="p">)):</span>
        <span class="nb">sum</span> <span class="o">=</span> <span class="nb">sum</span> <span class="o">+</span> <span class="nb">ord</span><span class="p">(</span><span class="n">astring</span><span class="p">[</span><span class="n">pos</span><span class="p">])</span>

    <span class="k">return</span> <span class="nb">sum</span><span class="o">%</span><span class="n">tablesize</span>
</pre></div>
</div>
<p>É interessante notar que quando usamos essa função de espalhamento, anagramas
sempre terão o mesmo valor de dispersão. Para contornar isso, poderíamos usar
a posição do caractere como um peso. A <a class="reference internal" href="#fig-stringhash2"><span class="std std-ref">Figura 7</span></a> mostrar
uma maneira possível de usar o valor posicional como um fator de peso. A
modificação na função de espalhamento é deixada como exercício.</p>
<div class="figure align-center" id="id6">
<span id="fig-stringhash2"></span><img alt="../_images/stringhash2.png" src="../_images/stringhash2.png" />
<p class="caption"><span class="caption-text">Figura 7: Hashing de uma String Usando Valores Ordinais com Peso</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
<p>Você pode pensar em diversas outras formas de computar valores de
espalhamento para os itens de uma coleção. O importante é lembrar que a
função de espalhamento precisa ser eficiente, de modo que ela não se torne
a parte dominante no processo de armazenamento e busca. Se a função de
espalhamento for muito complexa, então computar posições na tabela se torna
mais trabalhoso do que simplesmente realizar uma busca sequencial ou
binária, já abordadas anteriormente. Isso iria aniquilar o propósito
do hashing.</p>
</div>
<div class="section" id="resolucao-de-colisoes">
<h2>5.5.2. Resolução de Colisões<a class="headerlink" href="#resolucao-de-colisoes" title="Permalink to this headline">¶</a></h2>
<p>Retornamos agora ao problema das colisões. Quando dois itens são levados
à mesma posição pela função de espalhamento, precisamos ter uma forma
sistemática de colocar o segundo item na tabela de dispersão. Esse processo
é chamado de <strong>resolução de colisões</strong>. Como dito anteriormente, se a função
de espalhamento for perfeita, colisões nunca ocorrerão. Contudo, como isso
não é muito realista, a resolução de colisões acaba sendo uma parte
muito importante do hashing.</p>
<p>Um método para resolução de colisões olha para a tabela de dispersão e tenta
encontrar outra posição aberta que possa armazenar o item que causou a colisão.
Uma forma simples de fazer isso é começar pela posição do valor de espalhamento
original e mover de forma sequencial pelas entradas até encontrar a primeira
que esteja vazia. Note que poderemos ter que voltar para a primeira entrada
(circularmente) para cobrir a tabela de dispersão inteira. Esse processo de
resolução de colisões é conhecido como <strong>endereçamento aberto</strong>, já que ele
procura encontrar a próxima entrada aberta na tabela de dispersão. Ao visitar
sistematicamente uma posição por vez, estamos realizando uma técnica de
endereçamento aberto chamada <strong>sondagem linear</strong>.</p>
<p>A <a class="reference internal" href="#fig-linearprobing"><span class="std std-ref">Figura 8</span></a> mostra o conjunto ampliado de inteiros
(54,26,93,17,77,31,44,55,20) submetidos à função de espalhamento simples
baseada no resto da divisão. A <a class="reference internal" href="#tbl-hashvalues1"><span class="std std-ref">Tabela 4</span></a> acima mostra
os valores de espalhamento para os itens originais. A
<a class="reference internal" href="#fig-hashtable2"><span class="std std-ref">Figura 5</span></a> mostra seu elementos originais. Quando
tentamos colocar o 44 na entrada 0, ocorre uma colisão. Usando a sondagem
linear, procuramos sequencialmente, entrada por entrada, até encontrarmos uma
posição aberta. Nesse caso, achamos o slot 1.</p>
<p>Novamente, o 55 deveria cair no slot 0, mas acaba sendo colocado no 2, já que
é a próxima entrada disponível. O valor final de 20 leva à posição 9. Como
ela já está ocupada, começamos a fazer a sondagem linear. Visitamos então
as entradas 10, 0, 1 e 2, até finalmente encontrarmos uma entrada vazia na
posição 3 da tabela.</p>
<div class="figure align-center" id="id7">
<span id="fig-linearprobing"></span><img alt="../_images/linearprobing1.png" src="../_images/linearprobing1.png" />
<p class="caption"><span class="caption-text">Figura 8: Resolução de Colisões com Sondagem Linear</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</div>
<p>Uma vez construída uma tabela de dispersão usando endereçamento aberto e
sondagem linear, é essencial que utilizemos os mesmos métodos para procurar
os itens. Suponha que estamos em busca do item 93. Quando computamos seu
valor de espalhamento, temos 5 como resultado. Ao procurar na posição 5,
encontramos o 93, então podemos retornar <code class="docutils literal notranslate"><span class="pre">True</span></code>. Mas o que acontece se
procurarmos pelo 20? Nesse caso, o valor de espalhamento é 9 e o slot 9
está sendo ocupado pelo 31. Nós não podemos simplesmente retornar <code class="docutils literal notranslate"><span class="pre">False</span></code>
porque sabemos que pode ter ocorrido colisões. Somos obrigados então a fazer
uma busca sequencial, começando pela posição 10 e procurando até encontrarmos
o item 20 ou uma entrada vazia.</p>
<p>Uma desvantagem da sondagem linear é a tendência para <strong>aglutinação</strong>, isto é,
os itens tendem a ficar agrupados na tabela. Isso significa que se ocorrerem
muitas colisões em um mesmo valor de espalhamento, as entradas vizinhas
ficarão ocupadas por causa da sondagem linear. Isso terá um impacto sobre os
outros itens que forem inseridos, como vimos quando tentamos adicionar o item
20 acima. Uma aglutinação de valores sendo levados a 0 teve que ser
vencida para que finalmente encontrássemos uma posição vazia. Essa aglutinação
é mostrada na <a class="reference internal" href="#fig-clustering"><span class="std std-ref">Figura 9</span></a>.</p>
<div class="figure align-center" id="id8">
<span id="fig-clustering"></span><img alt="../_images/clustering.png" src="../_images/clustering.png" />
<p class="caption"><span class="caption-text">Figura 9: Uma Aglutinação de Items para a Entrada 0</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</div>
<p>Uma forma de lidar com a aglutinação é estender a técnica de sondagem linear
para que em vez de procurar sequencialmente para a próxima entrada aberta,
alguns slots sejam pulados, distribuindo assim os itens que causaram colisão
de maneira mais uniforme. Isso potencialmente irá reduzir a aglutinação.
A <a class="reference internal" href="#fig-linearprobing2"><span class="std std-ref">Figura 10</span></a> mostra como os itens ficam dispostos
quando uma resolução por colisão é feita com uma sondagem “mais 3”. Isso
significa que uma vez ocorrida a colisão, iremos procurar de três em três
entradas até encontrar uma vazia.</p>
<div class="figure align-center" id="id9">
<span id="fig-linearprobing2"></span><img alt="../_images/linearprobing2.png" src="../_images/linearprobing2.png" />
<p class="caption"><span class="caption-text">Figura 10: Resolução de Colisão Usando o “Mais 3”</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</div>
<p>O nome geral para esse processo de procurar por outro slot depois de uma
colisão é <strong>rehashing</strong>. Com uma simples sondagem linear, a função de
rehash é <span class="math notranslate nohighlight">\(newhashvalue = rehash(oldhashvalue)\)</span>, onde
<span class="math notranslate nohighlight">\(rehash(pos) = (pos + 1) \% tamanhodatabela\)</span>. O rehash “mais 3” pode ser
definido como  <span class="math notranslate nohighlight">\(rehash(pos) = (pos+3) \% tamanhodatabela\)</span>. De modo geral,
temos <span class="math notranslate nohighlight">\(rehash(pos) = (pos + pulo) \% tamanhodatabela\)</span>. É importante
notar que o tamanho do “pulo” precisa assumir um valor tal que todas as
entradas da tabela serão visitadas em algum momento. Caso contrário,
parte da tabela será inutilizada. Para garantir isso, sugere-se que o tamanho
da tabela seja um número primo. Essa é a razão de termos escolhido 11 em
nossos exemplos.</p>
<p>Uma variação da ideia de sondagem linear é a <strong>sondagem quadrática</strong>. Em vez
de um valor constante de “pulo”, usamos uma função de reshash que incrementa
o valor espalhamento por 1, 3, 5, 7, 9 e assim por diante. Isso significa que
se o primeiro valor de espalhamento for <em>h</em>, os valores seguintes são
<span class="math notranslate nohighlight">\(h+1\)</span>, <span class="math notranslate nohighlight">\(h+4\)</span>, <span class="math notranslate nohighlight">\(h+9\)</span>, <span class="math notranslate nohighlight">\(h+16\)</span> e assim sucessivamente.
Em outras palavras, a sondagem quadrática utiliza um pulo que consiste de
quadrados perfeitos sucessivos. A <a class="reference internal" href="#fig-quadratic"><span class="std std-ref">Figura 11</span></a> mostra
nossos valores de exemplo depois de eles terem sido alocados usando essa técnica.</p>
<div class="figure align-center" id="id10">
<span id="fig-quadratic"></span><img alt="../_images/quadratic.png" src="../_images/quadratic.png" />
<p class="caption"><span class="caption-text">Figura 11: Resolução de Colisões com Sondagem Quadrática</span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</div>
<p>Um método alternativo para lidar com o problema da colisão é permitir que cada
entrada tenha uma referência para uma coleção (ou sequência) de itens.
O <strong>Encadeamento</strong> permite que muitos itens existam no mesma entrada de uma
tabela de dispersão. Quando colisões acontecem, o item ainda assim é colocado
na entrada apropriada da tabela de dispersão. Mas conforme mais itens vão sendo
alocados para a mesma posição, a dificuldade de encontrar um item na coleção
aumenta. A <a class="reference internal" href="#fig-chaining"><span class="std std-ref">Figura 12</span></a> mostra os itens conforme eles
aumentb. vão sendo adicionados a uma tabela de dispersão que usa encadeamento
aumentc. para resolver colisões.</p>
<div class="figure align-center" id="id11">
<span id="fig-chaining"></span><img alt="../_images/chaining.png" src="../_images/chaining.png" />
<p class="caption"><span class="caption-text">Figura 12: Resolução de Colisões por Encadeamento</span><a class="headerlink" href="#id11" title="Permalink to this image">¶</a></p>
</div>
<p>Quando queremos procurar por um item, usamos a função de espalhamento para gerar
o slot aonde ele deveria cair. Como cada entrada contém uma coleção, usamos uma
técnica de busca para decidir se o item está presente ou não. A vantagem é que
na média é provável que haja muito poucos itens por slot, então a busca tende
a ser mais eficiente. No final desta seção, iremos tratar da análise
do hashing.</p>
<div class="admonition-autoavaliacao admonition">
<p class="admonition-title">Autoavaliação</p>

            <div class="runestone alert alert-warning">
            <ul data-component="multiplechoice" data-multipleanswers="false"  id="HASH_1">
            <p>Q-1: Na tabela de dispersão de tamanho 13, para quais índices as seguintes duas chaves seriam mapeadas? 27, 130</p>

            <li data-component="answer"  id="HASH_1_opt_a">1, 10</li><li data-component="feedback" id="HASH_1_opt_a">Cuidado: use o módulo, não a divisão por inteiro.</li>
            
            <li data-component="answer"  id="HASH_1_opt_b">13, 0</li><li data-component="feedback" id="HASH_1_opt_b">Não divida por dois, use o operador módulo.</li>
            
            <li data-component="answer" data-correct id="HASH_1_opt_c">1, 0</li><li data-component="feedback" id="HASH_1_opt_c">27 % 13 == 1 e 130 % 13 == 0</li>
            
            <li data-component="answer"  id="HASH_1_opt_d">2, 3</li><li data-component="feedback" id="HASH_1_opt_d">Use o operador módulo</li>
            

            </ul>
            </div>
            
            <div class="runestone alert alert-warning">
            <ul data-component="multiplechoice" data-multipleanswers="false"  id="HASH_2">
            <p>Q-2: Suponha que seja dado o seguinte conjunto de chaves a serem inseridas em uma tabela de dispersão com 11 posições: 113 , 117 , 97 , 100 , 114 , 108 , 116 , 105 , 99. Qual das opções a seguir mostra o conteúdo da tabela depois de todas as chaves terem sido inseridas usando sondagem linear?</p>

            <li data-component="answer"  id="HASH_2_opt_a">100, __, __, 113, 114, 105, 116, 117, 97, 108, 99</li><li data-component="feedback" id="HASH_2_opt_a">Parece que você fez aritmética de módulo 2. Você precisa usar o tamanho da tabela de dispersão como valor do módulo.</li>
            
            <li data-component="answer" data-correct id="HASH_2_opt_b">99, 100, __, 113, 114, __, 116, 117, 105, 97, 108</li><li data-component="feedback" id="HASH_2_opt_b">Esses valores são dados pela aritmética de módulo 11 e sondagem linear.</li>
            
            <li data-component="answer"  id="HASH_2_opt_c">100, 113, 117, 97, 14, 108, 116, 105, 99, __, __</li><li data-component="feedback" id="HASH_2_opt_c">Parece que você está usando aritmética de módulo 10. Use o tamanho da tabela.</li>
            
            <li data-component="answer"  id="HASH_2_opt_d">117, 114, 108, 116, 105, 99, __, __, 97, 100, 113</li><li data-component="feedback" id="HASH_2_opt_d">Cuidado: use o módulo, não divisão por inteiro.</li>
            

            </ul>
            </div>
            </div>
</div>
<div class="section" id="implementando-o-tipo-de-dado-abstrato-mapa">
<h2>5.5.3. Implementando o Tipo de Dado Abstrato <code class="docutils literal notranslate"><span class="pre">Mapa</span></code><a class="headerlink" href="#implementando-o-tipo-de-dado-abstrato-mapa" title="Permalink to this headline">¶</a></h2>
<p>Um dos tipos mais úteis de coleção em Python é o dicionário. Lembre-se de que
um dicionário é tipo de dado associativo onde você poder armazenar pares de
chave-valor. A chave é usada para procurar pelo valor associado. Com frequência,
referimo-nos a essa ideia como um <strong>mapa</strong>.</p>
<p>O tipo de dado abstrato mapa é definido da seguinte forma: a estrutura é uma
coleção não ordenada de associações entre uma chave e um valor. As chaves em
um mapa são todas únicas de modo que há uma correspondência um-para-um
entre uma chave e um valor. As operações são dadas a abaixo.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Map()</span></code> Cria um novo mapa vazio. Retorna uma coleção do tipo mapa vazia.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">put(key,val)</span></code> Adiciona um novo par chave-valor para o mapa. Se a chave
já estiver no mapa, então substitui o valor antigo pelo novo.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get(key)</span></code> Dada uma chave, retorna o valor armazenado no mapa ou
<code class="docutils literal notranslate"><span class="pre">None</span></code>, caso contrário.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">del</span></code> Elimina o par chave-valor do mapa usando uma declaração da forma
<code class="docutils literal notranslate"><span class="pre">del</span> <span class="pre">map[key]</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">len()</span></code> Retorna o número de pares chave-valor armazenadas no mapa.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">in</span></code> Retorna <code class="docutils literal notranslate"><span class="pre">True</span></code> para uma declaração da forma <code class="docutils literal notranslate"><span class="pre">key</span> <span class="pre">in</span> <span class="pre">map</span></code>, se
a chave dada estiver no mapa e <code class="docutils literal notranslate"><span class="pre">False</span></code>, caso contrário.</p></li>
</ul>
<p>Um dos grandes benefícios de um dicionário é o fato de que dada uma chave,
podemos procurar pelo valor associado rapidamente. Para conseguir realizar
essa busca rápida, precisamos de uma implementação que dê suporte a uma
busca eficiente. Poderíamos usar uma lista com busca binária ou sequencial,
mas seria ainda melhor se usássemos uma tabela de dispersão, como descrita
acima, já que a procura por um item em uma tabela de dispersão pode ter um
desempenho de aproximadamente <span class="math notranslate nohighlight">\(O(1)\)</span>.</p>
<p>Em <a class="reference internal" href="#lst-hashtablecodeconstructor"><span class="std std-ref">Listing 2</span></a>, usamos duas listas para
criar uma classe do tipo <code class="docutils literal notranslate"><span class="pre">HashTable</span></code> que implementa o tipo de dado abstrato
Map. Uma lista, chamada <code class="docutils literal notranslate"><span class="pre">slots</span></code>, irá armazenar os valores. Quando realizamos
a busca com uma chave, a posição correspondente na lista de dados irá conter
o valor associado. Iremos tratar a lista de chaves como uma tabela de
dispersão, de acordo com as ideias apresentadas anteriormente. Note que o
tamanho inicial escolhido para a tabela de dispersão foi 11. Embora isso seja
arbitrário, é importante que o tamanho seja um número primo para que o
algoritmo de resolução de colisões seja o mais eficiente possível.</p>
<p id="lst-hashtablecodeconstructor"><strong>Listing 2</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">HashTable</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="mi">11</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slots</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span>
</pre></div>
</div>
<p>A função <code class="docutils literal notranslate"><span class="pre">hashfunction</span></code> é uma simples implementação do método do resto.
A ténica para resolução de colisões é a sondagem linear com uma função de
rehash “mais 1”. A função <code class="docutils literal notranslate"><span class="pre">put</span></code> (veja <a class="reference internal" href="#lst-hashtablecodestore"><span class="std std-ref">Listing 3</span></a>)
pressupõe que em algum momento haverá uma entrada vazia, a menos que a chave
já esteja presenta em <code class="docutils literal notranslate"><span class="pre">self.slots</span></code>. Ela computa o valor original de
espalhamento e se o slot não estiver vazio, itera a função de <code class="docutils literal notranslate"><span class="pre">reshash</span></code> até
apareça uma entrada vazia. Se um slot não vazio já contiver a chave, o valor
antigo é substituído pelo novo. Deixamos como exercício a implementação da
situação em que não há mais slots vazios.</p>
<p id="lst-hashtablecodestore"><strong>Listing 3</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">data</span><span class="p">):</span>
  <span class="n">hashvalue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hashfunction</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="p">))</span>

  <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="p">[</span><span class="n">hashvalue</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="p">[</span><span class="n">hashvalue</span><span class="p">]</span> <span class="o">=</span> <span class="n">key</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">hashvalue</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="p">[</span><span class="n">hashvalue</span><span class="p">]</span> <span class="o">==</span> <span class="n">key</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">hashvalue</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>  <span class="c1">#replace</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">nextslot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rehash</span><span class="p">(</span><span class="n">hashvalue</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="p">))</span>
      <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="p">[</span><span class="n">nextslot</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> \
                      <span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="p">[</span><span class="n">nextslot</span><span class="p">]</span> <span class="o">!=</span> <span class="n">key</span><span class="p">:</span>
        <span class="n">nextslot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rehash</span><span class="p">(</span><span class="n">nextslot</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="p">))</span>

      <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="p">[</span><span class="n">nextslot</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="p">[</span><span class="n">nextslot</span><span class="p">]</span><span class="o">=</span><span class="n">key</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">nextslot</span><span class="p">]</span><span class="o">=</span><span class="n">data</span>
      <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">nextslot</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span> <span class="c1">#replace</span>

<span class="k">def</span> <span class="nf">hashfunction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">size</span><span class="p">):</span>
     <span class="k">return</span> <span class="n">key</span><span class="o">%</span><span class="n">size</span>

<span class="k">def</span> <span class="nf">rehash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">oldhash</span><span class="p">,</span><span class="n">size</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">oldhash</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">%</span><span class="n">size</span>
</pre></div>
</div>
<p>Da mesma forma, a função <code class="docutils literal notranslate"><span class="pre">get</span></code> (veja <a class="reference internal" href="#lst-hashtablecodesearch"><span class="std std-ref">Listing 4</span></a>)
começa computando o valor inicial de espalhamento. Se o valor não estiver na
entrada inicial, a função <code class="docutils literal notranslate"><span class="pre">rehash</span></code> é usada para encontrar a próxima posição
possível. Note que a linha 15 garante que a busca irá terminar ao checar que
não retornamos ao slot inicial. Se isso acontecer, visitamos todas as
entradas possíveis e, portanto, o item não está presente.</p>
<p>Os métodos finais da classe <code class="docutils literal notranslate"><span class="pre">HashTable</span></code> proveem funcionalidade adicional ao
dicionário. Fazemos uma sobrecarga dos métodos __getitem__ e __setitem__
para permitir o acesso usando <code class="docutils literal notranslate"><span class="pre">[]</span></code>. Isso significa que uma vez que a
<code class="docutils literal notranslate"><span class="pre">HashTable</span></code> tenha sido criada, operador familiar de índice estará
disponível. Deixamos os métodos restantes como exercícios.</p>
<p id="lst-hashtablecodesearch"><strong>Listing 4</strong></p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">):</span>
  <span class="n">startslot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hashfunction</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="p">))</span>

  <span class="n">data</span> <span class="o">=</span> <span class="bp">None</span>
  <span class="n">stop</span> <span class="o">=</span> <span class="bp">False</span>
  <span class="n">found</span> <span class="o">=</span> <span class="bp">False</span>
  <span class="n">position</span> <span class="o">=</span> <span class="n">startslot</span>
  <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="p">[</span><span class="n">position</span><span class="p">]</span> <span class="o">!=</span> <span class="bp">None</span> <span class="ow">and</span>  \
                       <span class="ow">not</span> <span class="n">found</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">stop</span><span class="p">:</span>
     <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="p">[</span><span class="n">position</span><span class="p">]</span> <span class="o">==</span> <span class="n">key</span><span class="p">:</span>
       <span class="n">found</span> <span class="o">=</span> <span class="bp">True</span>
       <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">position</span><span class="p">]</span>
     <span class="k">else</span><span class="p">:</span>
       <span class="n">position</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">rehash</span><span class="p">(</span><span class="n">position</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="p">))</span>
       <span class="k">if</span> <span class="n">position</span> <span class="o">==</span> <span class="n">startslot</span><span class="p">:</span>
           <span class="n">stop</span> <span class="o">=</span> <span class="bp">True</span>
  <span class="k">return</span> <span class="n">data</span>

<span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

<span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">data</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>A sessão seguinte mostra a classe <code class="docutils literal notranslate"><span class="pre">HashTable</span></code> em ação. Primeiro, criamos uma
tabela de dispersão e armazenamos alguns itens com chaves de inteiros e
valores do tipo string.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">H</span><span class="o">=</span><span class="n">HashTable</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">H</span><span class="p">[</span><span class="mi">54</span><span class="p">]</span><span class="o">=</span><span class="s2">&quot;cat&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">H</span><span class="p">[</span><span class="mi">26</span><span class="p">]</span><span class="o">=</span><span class="s2">&quot;dog&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">H</span><span class="p">[</span><span class="mi">93</span><span class="p">]</span><span class="o">=</span><span class="s2">&quot;lion&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">H</span><span class="p">[</span><span class="mi">17</span><span class="p">]</span><span class="o">=</span><span class="s2">&quot;tiger&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">H</span><span class="p">[</span><span class="mi">77</span><span class="p">]</span><span class="o">=</span><span class="s2">&quot;bird&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">H</span><span class="p">[</span><span class="mi">31</span><span class="p">]</span><span class="o">=</span><span class="s2">&quot;cow&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">H</span><span class="p">[</span><span class="mi">44</span><span class="p">]</span><span class="o">=</span><span class="s2">&quot;goat&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">H</span><span class="p">[</span><span class="mi">55</span><span class="p">]</span><span class="o">=</span><span class="s2">&quot;pig&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">H</span><span class="p">[</span><span class="mi">20</span><span class="p">]</span><span class="o">=</span><span class="s2">&quot;chicken&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">H</span><span class="o">.</span><span class="n">slots</span>
<span class="go">[77, 44, 55, 20, 26, 93, 17, None, None, 31, 54]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">H</span><span class="o">.</span><span class="n">data</span>
<span class="go">[&#39;bird&#39;, &#39;goat&#39;, &#39;pig&#39;, &#39;chicken&#39;, &#39;dog&#39;, &#39;lion&#39;,</span>
<span class="go">       &#39;tiger&#39;, None, None, &#39;cow&#39;, &#39;cat&#39;]</span>
</pre></div>
</div>
<p>A seguir, iremos acessar e modificar alguns itens na tabela de dispersão.
Note que o valor para a chave 20 está sendo substituído.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">H</span><span class="p">[</span><span class="mi">20</span><span class="p">]</span>
<span class="go">&#39;chicken&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">H</span><span class="p">[</span><span class="mi">17</span><span class="p">]</span>
<span class="go">&#39;tiger&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">H</span><span class="p">[</span><span class="mi">20</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;duck&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">H</span><span class="p">[</span><span class="mi">20</span><span class="p">]</span>
<span class="go">&#39;duck&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">H</span><span class="o">.</span><span class="n">data</span>
<span class="go">[&#39;bird&#39;, &#39;goat&#39;, &#39;pig&#39;, &#39;duck&#39;, &#39;dog&#39;, &#39;lion&#39;,</span>
<span class="go">       &#39;tiger&#39;, None, None, &#39;cow&#39;, &#39;cat&#39;]</span>
<span class="go">&gt;&gt; print(H[99])</span>
<span class="go">None</span>
</pre></div>
</div>
<p>O exemplo completo da tabela de dispersão está no ActiveCode 1.</p>

<div data-childcomponent="hashtablecomplete" class="runestone explainer ac_section alert alert-warning">

<textarea data-component="activecode" id=hashtablecomplete data-lang="python" 
    data-hidecode="true"  data-timelimit=25000  data-codelens="true"  
    data-audio=''     
         data-caption='Complete Hash Table Example' >
class HashTable:
    def __init__(self):
        self.size = 11
        self.slots = [None] * self.size
        self.data = [None] * self.size

    def put(self,key,data):
      hashvalue = self.hashfunction(key,len(self.slots))

      if self.slots[hashvalue] == None:
        self.slots[hashvalue] = key
        self.data[hashvalue] = data
      else:
        if self.slots[hashvalue] == key:
          self.data[hashvalue] = data  #replace
        else:
          nextslot = self.rehash(hashvalue,len(self.slots))
          while self.slots[nextslot] != None and \
                          self.slots[nextslot] != key:
            nextslot = self.rehash(nextslot,len(self.slots))

          if self.slots[nextslot] == None:
            self.slots[nextslot]=key
            self.data[nextslot]=data
          else:
            self.data[nextslot] = data #replace

    def hashfunction(self,key,size):
         return key%size

    def rehash(self,oldhash,size):
        return (oldhash+1)%size

    def get(self,key):
      startslot = self.hashfunction(key,len(self.slots))

      data = None
      stop = False
      found = False
      position = startslot
      while self.slots[position] != None and  \
                           not found and not stop:
         if self.slots[position] == key:
           found = True
           data = self.data[position]
         else:
           position=self.rehash(position,len(self.slots))
           if position == startslot:
               stop = True
      return data

    def __getitem__(self,key):
        return self.get(key)

    def __setitem__(self,key,data):
        self.put(key,data)

H=HashTable()
H[54]="cat"
H[26]="dog"
H[93]="lion"
H[17]="tiger"
H[77]="bird"
H[31]="cow"
H[44]="goat"
H[55]="pig"
H[20]="chicken"
print(H.slots)
print(H.data)

print(H[20])

print(H[17])
H[20]='duck'
print(H[20])
print(H[99])
</textarea>
</div>
</div>
<div class="section" id="analise-do-hashing">
<h2>5.5.4. Análise do Hashing<a class="headerlink" href="#analise-do-hashing" title="Permalink to this headline">¶</a></h2>
<p>Dissemos anteriormente que no melhor caso, o hashing é uma técnica de
busca de tempo constante, isto é, <span class="math notranslate nohighlight">\(O(1)\)</span>. Contudo, devido às colisões,
o número de comparações não é tipicamente tão simples. Embora uma análise
completa do hashing esteja além do escopo deste texto, podemos mostrar
alguns resultados bem conhecidos sobre o número aproximado de comparações
necessárias para buscar um item.</p>
<p>A peça mais importante de informação de que precisamos para analisar o uso
de uma tabela de dispersão é o fator de carga <span class="math notranslate nohighlight">\(\lambda\)</span>. Conceitualmente,
se <span class="math notranslate nohighlight">\(\lambda\)</span> for pequeno, então há uma chance menor de colisões,
o que significa que há mais chance de os itens estarem nas entradas a que
pertencem. Se <span class="math notranslate nohighlight">\(\lambda\)</span> for grande, isto é, se a tabela estiver
carregada, então haverá mais e mais colisões. Isso significa que a resolução
de colisões será mais difícil, requerendo mais comparações para encontrar uma
entrada vazia. Com o encademaneto, um número crescente de colisões significa
um número crescente de itens em cada sequência (ou cadeia).</p>
<p>Assim como antes, teremos um resultado tanto para uma busca bem-sucedida
quanto mal-sucedida. Para uma busca bem-sucedida, usando endereçamento
aberto com sondagem linear, o número médio de comparações é de aproximadamente
<span class="math notranslate nohighlight">\(\frac{1}{2}\left(1+\frac{1}{1-\lambda}\right)\)</span>, enquanto a busca
mal-sucedida resulta em <span class="math notranslate nohighlight">\(\frac{1}{2}\left(1+\left(\frac{1}{1-\lambda}\right)^2\right)\)</span>.
Se usarmos o encadeamento, o número médio de comparações é <span class="math notranslate nohighlight">\(1 + \frac {\lambda}{2}\)</span>
para o caso bem-sucedido e simplesmente <span class="math notranslate nohighlight">\(\lambda\)</span> comparações para
busca mal-sucedida.</p>
</div>
</div>


  
      
<ul>
  <li id="relations-prev" class="navLink" title='Previous Section - 5.4. A Busca Binária' data-toggle="tooltip">
    <a href="BuscaBinaria.html" aria-label="5.4. A Busca Binária">
        <div style="background-color: white; border-style:solid; border-color:lightgrey; border-width:2px; width:100px; height:50px">
            <i class='prevNav glyphicon glyphicon-chevron-left' style="top:50%; transform:translateY(-50%)translateX(-50%); left: 50%;"></i>
        </div>
    </a>
  </li>
</ul>
  <a class="navLinkBg" id="navLinkBgLeft"  href="BuscaBinaria.html" aria-label="5.4. A Busca Binária"></a>
  
<ul>
  <li id="relations-next" class="navLink" title='Next Section - 5.6. Ordenação' data-toggle="tooltip" >
    <a href="ordenacao.html" aria-label="5.6. Ordenação">
      <div style="background-color: white; border-style:solid; border-color:lightgrey; border-width:2px; width:100px; height:50px">
          <i id="relationsNextIcon" class='nextNav glyphicon glyphicon-chevron-right' style="top:50%; transform:translateY(-50%)translateX(-50%); left: 50%;"></i>
      </div>
    </a>
  </li>
</ul>
  <a class="navLinkBg navLink" id="navLinkBgRight" href="ordenacao.html" aria-label="5.6. Ordenação">Next Section - 5.6. Ordenação</a>

<script type="text/javascript">

  $('#relations-prev').tooltip({'placement':'right', 'selector': '', 'delay': { show: 100, hide: 50}});
  $('#relations-next').tooltip({'placement':'left', 'selector': '', 'delay': { show: 100, hide: 50}});

</script>
  
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      
      | <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2019 DCC IME USP.
      Created using <a href="http://runestoneinteractive.org/">Runestone</a> 3.4.5.
    </p>
  </div>
</footer>



<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32029811-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



  </body>
</html>